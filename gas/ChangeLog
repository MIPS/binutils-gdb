2007-02-05  Dave Brolley  <brolley@redhat.com>

	* Makefile.am: Add support for Toshiba MeP.
	* configure.in: Likewise
	* config/tc-mep.c:
	* config/obj-elf.c: New file.
	* config/tc-mep.c: New file.
	* config/tc-mep.h: New file.
	* testsuite/gas/mep: New testsuite with content.
	* Makefile.in: Regenerate.
	* configure: Regenerate.

2007-02-05  Dave Brolley  <brolley@redhat.com>

	* cgen.c (gas_cgen_install_complex_reloc): Removed.
	(complex_reloc_installation_howto): Removed.

2007-02-05  Dave Brolley  <brolley@redhat.com>

	* Contribute the following changes:
	2002-06-06  Graydon Hoare  <graydon@redhat.com>

	* symbols.c (use_complex_relocs_for): Tighten up conditions on
	resolving expression symbols.

	2002-04-04  DJ Delorie  <dj@redhat.com>

	* symbols.c (use_complex_relocs_for): New, to decide
	when to use complex relocs.
	(resolve_symbol_value): Use it.

	2002-03-07  Graydon Hoare  <graydon@redhat.com>

	* cgen.c: Minor debugging touchups, warning removal.

	2002-02-17  Catherine Moore  <clm@redhat.com>

	* cgen.c (gas_cgen_md_apply_fix3):  Only set signed_p if RELC.

	2002-01-23  Graydon Hoare  <graydon@redhat.com>

	* cgen.c (gas_cgen_parse_operand): Add signed RELC support.
	(queue_fixup_recursively): Likewise.
	(make_right_shifted_expr): Likewise.
	* symbols.c (resolve_symbol_value): Likewise.

	2002-01-15  Graydon Hoare  <graydon@redhat.com>

	* write.h (struct fix): Add msb_field_p to fx_cgen sub-struct.
	* cgen.c (make_masked_expr): Remove.
	(gas_cgen_encode_addend): Add oplen, signed_p, trunc_p params.
	(gas_cgen_md_apply_fix3): Call encode_addend with new args.
	(queue_fixup_recursively): Change from masked expr to trunc flag.
	(queue_fixup_recursively): Restore assignment of sub-field value to
	temporary in fixups array (lost in recent merge).

	2002-01-01  Graydon Hoare  <graydon@redhat.com>

	* cgen.c (make_masked_expr): Add.
	(queue_fixup_recursively): Call make_masked_expr on non-rightmost
	fragments of multi-ifield complex relocs.
	(gas_cgen_parse_operand): Reflect changed meaning of last arg to
	queue_fixup_recursively.

	2001-12-18  Graydon Hoare  <graydon@redhat.com>

	* cgen.c (weak_operand_overflow_check): Improve accuracy of
	detecting overflows.

	2001-12-17  Nick Clifton  <nickc@cambridge.redhat.com>

	* cgen.c: Tidy up RELC code after the merge.

	2001-11-15  graydon hoare  <graydon@redhat.com>

	* cgen.c (fixup): Add cgen_maybe_multi_ifield member.
	(make_right_shifted_expr): New function.
	(queue_fixup): Change to recursive function that fragments
	fixups if operand has a multi-ifield.
	(gas_cgen_parse_operand): Add RELC code to wrap expressions in
	symbols, call weak_operand_overflow_check, and fragment call
	queue_fixup with operand fields.
	(gas_cgen_finish_insn) Modify to manage ifield pointer.
	(gas_cgen_md_apply_fix3) Modify to get start, length from
	ifield whenever it is set. Also change condition on which
	self-describing relocs are encoded.
	(weak_operand_overflow_check): New function to try to select
	insns correctly.
	* cgen.h (GAS_CGEN_MAX_FIXUPS): Bump from 3 up to 32.
	* write.h (struct fix): Add cgen_maybe_multi_ifield field to
	fx_cgen substructure
	* config/tc-mep.c (md_cgen_lookup_reloc): Fall back to
	BFD_RELOC_RELC when no other reloc types can be found.

	2001-10-03  graydon hoare  <graydon@redhat.com>

	* symbols.c (resolve_symbol_value): Unconditionally encode
	expression symbols as mangled complex relocation symbols (when
	compiled with -DOBJ_COMPLEX_RELOC)

	* cgen.c (gas_cgen_encode_addend): New function for relc.
	(gas_cgen_install_complex_reloc): Likewise.
	(gas_cgen_md_apply_fix3): Add hook into gas_cgen_encode_addend.
	(gas_cgen_tc_gen_reloc): Add hook into gas_cgen_install_complex_reloc.

	2001-06-24  Michael Chastain  <chastain@redhat.com>

	* symbols.c (symbol_relc_make_expr): Conform to K & R C.

	2001-06-20  Frank Ch. Eigler  <fche@redhat.com>

	* symbols.c (resolve_symbol_value): Conditionally generate relc
	symbols from unresolved expressions.
	(symbol_relc_make_sym,value,expr): New traversal/conversion routines.
	* symbols.h: Declare them.

2007-02-03  DJ Delorie  <dj@delorie.com>

	* config/tc-m32c.c (m32c_cons_fix_new): New.  Added to support 3
	byte relocs.
	* config/tc-m32c.h (TC_CONS_FIX_NEW): Define.
	(m32c_cons_fix_new): Prototype.

2007-02-02  Bob Wilson  <bob.wilson@acm.org>
	
	* config/tc-xtensa.c (xg_build_to_insn): Use tinsn_init.
	(xg_expand_assembly_insn, istack_push_space, istack_pop): Likewise.
	
2007-02-02  Bob Wilson  <bob.wilson@acm.org>

	* config/tc-xtensa.c (SUFFIX_MAP, suffix_relocs): New.
	(xtensa_elf_suffix): Use suffix_relocs instead of local mapping table.
	(map_suffix_reloc_to_operator): New.
	(map_operator_to_reloc): New.
	(expression_maybe_register): Fix incorrect test of return value from
	xtensa_elf_suffix.  Rearrange to use map_suffix_reloc_to_operator.
	(xg_assemble_literal, convert_frag_immed): Use map_operator_to_reloc.

2007-02-02  Bob Wilson  <bob.wilson@acm.org>

	* config/xtensa-istack.h (struct tinsn_struct): Delete fixup field.
	(tinsn_get_tok): Delete prototype.
	* config/tc-xtensa.c (tinsn_get_tok): Delete.
	
2007-02-02  Bob Wilson  <bob.wilson@acm.org>

	* config/xtensa-relax.h (struct build_instr): Delete id field.
	* config/xtensa-relax.c (widen_spec_list): Remove zeros from LITERAL
	and LABEL tokens.
	(append_literal_op, append_label_op): Remove litnum/labnum arguments;
	set op_data fields to zero.
	(parse_id_constant): Delete.
	(build_transition): Remove code to handle numbered literals and labels.

2007-02-02  Bob Wilson  <bob.wilson@acm.org>

	* config/xtensa-relax.c (build_transition): Remove code after as_fatal.
	(build_transition_table): Likewise.

2007-02-01  Bob Wilson  <bob.wilson@acm.org>

	* config/tc-xtensa.c (xg_add_opcode_fix, md_apply_fix): Delete use of
	fx_tcbit.
	* config/tc-xtensa.h (TC_FORCE_RELOCATION_LOCAL): Remove.

2007-02-02  Alan Modra  <amodra@bigpond.net.au>

	* write.h (struct fix <fx_pcrel_adjust, fx_size>): Move.
	(struct fix <fx_plt>): Rename to tcbit2.
	* write.c (fix_new_internal): Adjust.
	(TC_FORCE_RELOCATION_LOCAL): Don't test fx_plt.
	* config/tc-arm.h (TC_FORCE_RELOCATION_LOCAL): Likewise.
	* config/tc-cris.h (TC_FORCE_RELOCATION_LOCAL): Likewise.
	* config/tc-i386.h (TC_FORCE_RELOCATION_LOCAL): Likewise.
	* config/tc-i960.h (TC_FORCE_RELOCATION_LOCAL): Likewise.
	* config/tc-sh.h (TC_FORCE_RELOCATION_LOCAL): Likewise.
	* config/tc-sh64.h (TC_FORCE_RELOCATION_LOCAL): Likewise.
	* config/tc-sparc.h (TC_FORCE_RELOCATION_LOCAL): Likewise.
	* config/tc-msp430.c (msp430_force_relocation_local): Likewise.
	* config/tc-ia64.c (emit_one_bundle): Don't set fx_plt.
	* config/tc-ia64.h (TC_FORCE_RELOCATION_LOCAL): Don't test fx_plt.
	Instead, compare fx_r_type.
	* config/tc-xtensa.c (xg_add_opcode_fix, md_apply_fix): Use
	fx_tcbit in place of fx_plt.
	* config/tc-xtensa.h (TC_FORCE_RELOCATION_LOCAL): Define.
	* doc/internals.texi (TC_FORCE_RELOCATION_LOCAL): Remove reference
	to fx_plt.

2007-01-30  Nick Clifton  <nickc@redhat.com>

	* as.c (main): Mark symbols created via the --defsym command line
	option as volatile so that they can be overridden later on by a
	.set directive.  This maintains compatibility with the behaviour
	of earlier versions of the assembler.
	* doc/as.texinfo (--defsym): Document that the defined symbol's
	value can be overridden via a .set directive.

2007-01-28  H.J. Lu  <hongjiu.lu@intel.com>

	* config/tc-i386.c (swap_imm_operands): Renamed to ...
	(swap_2_operands): This.  Take 2 ints.
	(md_assemble): Updated.
	(swap_operands): Call swap_2_operands to swap 2 operands.

2007-01-24  DJ Delorie  <dj@redhat.com>

	* config/tc-m32c.c (md_pseudo_table): Add .3byte.

2007-01-22  Nick Clifton  <nickc@redhat.com>

	PR gas/3871
	* tc-score.c: Remove unnecessary uses of _().
	Make the err_msg[] a file level local array in order to save
	storage space.
	Remove unnecessary sprintf()s.

2007-01-18  Mei Ligang  <ligang@sunnorth.com.cn>

	PR gas/3871
	* config/tc-score.c : Using _() for const string.
	Do not assign inst.error with a local string pointer.
	(md_section_align): Pad section.
	
2007-01-13  H.J. Lu  <hongjiu.lu@intel.com>

	* config/tc-i386.c (build_modrm_byte): Check number of operands
	when procssing memory/register operand.

2007-01-12  Nick Clifton  <nickc@redhat.com>

	PR gas/3856
	* macro.c (expand_irp): Do not ignore spaces inside quoted
	strings.

2007-01-12  Alan Modra  <amodra@bigpond.net.au>

	* config/tc-spu.h (TC_RELOC_RTSYM_LOC_FIXUP): Delete.
	* config/tc-m32r.h (TC_RELOC_RTSYM_LOC_FIXUP): Delete.
	* config/tc-mn10300.h (TC_RELOC_RTSYM_LOC_FIXUP): Delete.
	(TC_FORCE_RELOCATION): Define.
	(TC_FORCE_RELOCATION_LOCAL): Define.
	* config/tc-mn10300.c (mn10300_fix_adjustable): Adjust.

2007-01-12  Alan Modra  <amodra@bigpond.net.au>

	* input-file.c (input_file_open): Check fgets return.

2007-01-11  Paul Brook  <paul@codesourcery.com>

	* config/tc-arm.c (do_t_add_sub): Use Rd and Rs.

2007-01-11  Nick Clifton  <nickc@redhat.com>

	PR gas/3707
	* config/tc-arm.c (md_begin): Cope with an NULL mcpu_fpu_opt
	variable.

	* config/tc-mcore.c (md_number_to_chars): Use
	number_to_chars_{big|little}endian.

2007-01-08  Kazu Hirata  <kazu@codesourcery.com>

	* config/tc-m68k.c (m68k_archs, m68k_cpus): Treat Fido as an
	architecture by itself.
	(m68k_ip): Don't issue a warning for tbl instructions on fido.
	(m68k_elf_final_processing): Treat Fido as an architecture by
	itself.

2007-01-08  Kai Tietz	<kai.tietz@onevision.com>

	* configure.tgt: Renamed target x86_64-*-mingw64 to x86_64-*-mingw*

2007-01-05  H.J. Lu  <hongjiu.lu@intel.com>

	* config/tc-i386.c (set_intel_syntax): Update set_intel_syntax
	depending on allow_naked_reg.

2007-01-04  Paul Brook  <paul@codesourcery.com>

	* config/tc-arm.c (do_cpsi): Set mmod bit for 2 argument form.

2007-01-04  H.J. Lu  <hongjiu.lu@intel.com>

	PR gas/3830
	* config/tc-i386.c (register_prefix): New.
	(set_intel_syntax): Set set_intel_syntax to "" if register
	prefix isn't needed.
	(check_byte_reg): Use register_prefix for error message.
	(check_long_reg): Likewise.
	(check_qword_reg): Likewise.
	(check_word_reg): Likewise.

2006-01-04  Julian Brown  <julian@codesourcery.com>

	* config/tc-arm.c (do_neon_shl_imm): Swap rN, rM.
	(do_neon_qshl_imm): Likewise.
	(do_neon_rshl): New function. Handle rounding variants of
	v{q}shl-by-register.
	(insns): Use do_neon_rshl for vrshl, vqrshl.

2007-01-04  Paul Brook  <paul@codesourcery.com>

	* config/tc-arm.c (NEON_ENC_TAB): Fix encoding of vclt, vcle, vaclt
	and vacle.

2007-01-03  H.J. Lu  <hongjiu.lu@intel.com>

	* config/tc-i386.c (swap_operands): Remove branches.

2007-01-03  H.J. Lu  <hongjiu.lu@intel.com>

	* config/tc-i386.c: Update copyright year.
	* config/tc-i386.h: Likewise.

2007-01-03  H.J. Lu  <hongjiu.lu@intel.com>

	* config/tc-i386.c (smallest_imm_type): Return unsigned int
	instead of int.

2007-01-03  H.J. Lu  <hongjiu.lu@intel.com>

	* config/tc-i386.c: Convert to ISO C90 formatting
	* config/tc-i386.h: Likewise.

2007-01-03  David Daney  <ddaney@avtrex.com>

	* config/tc-mips.c (md_show_usage):  Clean up -mno-shared
	documentation.

For older changes see ChangeLog-2006

Local Variables:
mode: change-log
left-margin: 8
fill-column: 74
version-control: never
End:
