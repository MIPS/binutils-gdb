Wed Mar  1 00:49:06 2000  Andrew Cagney  <cagney@b1.cygnus.com>

	From 2000-02-28 Peter Schauer <pes@regent.e-technik.tu-muenchen.de>:
	Make NEW_PROC_ABI interface functional on Solaris x86.
	* sol-thread.c (ps_lgetLDT): Rewrite to use new
 	procfs_find_LDT_entry function from procfs.c, mostly copied from
 	lin-thread.c.
	* inferior.h, procfs.c (procfs_get_pid_fd): Removed, no longer
 	needed.

Wed Mar  1 00:34:55 2000  Andrew Cagney  <cagney@b1.cygnus.com>

	From 2000-02-26 Peter Schauer <pes@regent.e-technik.tu-muenchen.de>:
	* config/i386/tm-i386sol2.h (MERGEPID): Define.

Wed Mar  1 00:06:19 2000  Andrew Cagney  <cagney@b1.cygnus.com>

	From 1999-08-13 J.T. Conklin <jtc@redback.com>:
        * config/i386/tm-i386.h (FRAME_INIT_SAVED_REGS): Replace
        FRAME_FIND_SAVED_REGS.
        (i386_frame_init_saved_regs): Replace i386_frame_find_saved_regs.
        * i386-tdep.c (i386_frame_init_saved_regs, i386_pop_frame):
        Update.

Tue Feb 29 23:56:41 2000  Andrew Cagney  <cagney@b1.cygnus.com>

	From 2000-02-23 Peter Schauer <pes@regent.e-technik.tu-muenchen.de>:
	* objfiles.c (open_mapped_file):  Fix obsolete references to `mapped'
	parameter.

Tue Feb 29 18:47:58 2000  Andrew Cagney  <cagney@b1.cygnus.com>

	From 2000-02-23 Eli Zaretskii <eliz@is.elta.co.il>:
	* config/i386/nm-go32.h (FLOAT_INFO): Remove macro definition.
	(top level): Add prototypes for go32_* functions.
	* config/i386/tm-go32.h (I386_DJGPP_TARGET): Define.
	(FRAME_CHAIN, FRAMELESS_FUNCTION_INVOCATION, FRAME_SAVED_PC):
	Override definitions from tm-i386.h.
	(REGISTER_VIRTUAL_TYPE): Remove macro definition.
	* i386-tdep.c (i386_extract_return_value)
	[I386_AIX_TARGET || I386_GNULINUX_TARGET]: Add I386_DJGPP_TARGET
	to the list of targets which return FP values in FP registers.

	* i386-tdep.c (i386_extract_return_value): Add FIXME recommending
 	that this function be re-implemented using multi-arch.

Tue Feb 29 18:40:08 2000  Andrew Cagney  <cagney@b1.cygnus.com>

	From 2000-02-23 Eli Zaretskii <eliz@is.elta.co.il>:
	* utils.c [__GO32__]: Include pc.h, for prototypes of ScreenCols
	and ScreenRows.
	* ser-go32.c: Include string.h, for prototype of strncasecmp.
	(dpmi_regs, dpmi_sregs): Remove unused variables.
	(dos_flush_input): Return a value, to prevent compiler warning.
	* expprint.c (dump_prefix_expression): Use %ld in format and cast
	sizeof(union exp_element) to long, to prevent GCC from complaining
	about format/argument mismatch.
	(dump_postfix_expression): Likewise.

Tue Feb 29 18:09:46 2000  Andrew Cagney  <cagney@b1.cygnus.com>

	* arm-tdep.c: Include <ctype.h>.

Tue Feb 29 17:33:49 2000  Andrew Cagney  <cagney@b1.cygnus.com>

	From Wed, 23 Feb 2000 Fernando Nasser <fnasser@redhat.com>:
	* stack.c (backtrace_command_1), infrun.c (normal_stop): Check
 	that the target's stack was valid.

Tue Feb 29 15:14:56 2000  Andrew Cagney  <cagney@b1.cygnus.com>

	From 2000-02-22 Stephane Carrez <stcarrez@worldnet.fr>:
        * dwarf2read.c (read_address): Read 16-bits addresses.

2000-02-28  Scott Bambrough <scottb@netwinder.org>

	* arm-linux-nat.c (fetch_nw_fpe_*):
 	Renamed to fetch_nwfpe_* to use the same naming convention
	as in the Linux kernel.  Modified prototype to get rid of
	unused parameters.
	(store_nw_fpe_*): Renamed to store_nwfpe_* to use the same
	naming convention as in the Linux kernel.  Fixed calls to 
	fetch_nwfpe_*.
	(store_fpregs): Fixed calls to store_nwfpe_*.  Removed
	unused variable. 

Mon Feb 28 18:24:32 2000  Andrew Cagney  <cagney@b1.cygnus.com>

	* MAINTAINERS: Transfer d30v maintainership to David Taylor.

2000-02-28  Christopher Faylor  <cgf@cygnus.com>

	* win32-nat.c: Remove unneeded header.
	* wince.c: Ditto.

Mon Feb 28 13:34:54 2000  Andrew Cagney  <cagney@b1.cygnus.com>

	* wince.c: Include "gdb_wait.h" and not "wait.h".

Mon Feb 28 10:58:45 2000  Andrew Cagney  <cagney@b1.cygnus.com>

	* MAINTAINERS: Mention mmalloc.  Expand Host/Native and
 	Target/Architecture maintainers descriptions.

2000-02-26  Mark Kettenis  <kettenis@gnu.org>

	* gnu-nat.c: Include "gdbthread.h".  Include <hurd.h>.
	Reorder headers a bit.  Overall cleanup and minor reformatting.
	(MIG_SERVER_DIED): Remove define.
	(proc_update_sc): Add braces to silence compiler warning.
	(proc_steal_exc_port): Initialize err to zero.
	(make_proc): Add braces to silence compiler warning.
	(inf_validate_task_sc): Add cast to silence compiler warning.
	(inf_set_traced): Reorganize a bit to silence compiler warning.
	(inf_validate_procs): Use mach_msg_type_number_t for all thread
	numbers and add braces to silence compiler warning.
	(gnu_wait): Add prototypes for server functions and add braces to
	silence compiler warnings.
	(S_exception_raise_request): Pass subcode to inf_debug call.
	(gnu_write_inferior): Remove unused variable `protection_changed'.
	(gnu_xfer_memory): Remove unused variable `result'.
	(set_sig_thread_cmd): Remove unused varible `tid'.
	(set_signals_cmd): Remve unused variable `trace'.
	(add_task_commands): Provide complete prototype.  Reformat help
	strings a bit to make sure the first line is a full sentence.
	Call info_port_rights_cmd instead of info_send_rights_cmd for the
	"info port-rights" command.
	(add_thread_commands): Provide complete prototype.  Make static.
	Reformat help strings a bit to make sure the first line is a full
	sentence.
	(_initialize_gnu_nat): Provide complete prototype.

2000-02-26  Mark Kettenis  <kettenis@gnu.org>

	Make cross-compilation for the Hurd more friendly.
	From Jeff Bailey <jbailey@gnu.org>:
	* configure.in: Use AC_CHECK_TOOL to find MiG.
	* Makefile.in (MIG): New variable.
	* config/i386/i386gnu.mh (MIG): Remove.
	* configure: Regenerated.

2000-02-26  Kevin Buettner  <kevinb@redhat.com>

	* ppc-linux-tdep.c (ppc_linux_memory_remove_breakpoint): Add
	comment explaining motivation behind this function and why
	the generic facilities won't work for this platform.
	* rs6000-tdep.c (skip_prologue): Always test to make sure
	that an instruction is read successfully from the target's
	memory.  Introduce notion of instructions which may appear in
	the prologue, but may not end the prologue.  Added explicit
	check for nop instruction.  Use memset() to zero the frame
	data instead of assignment from a statically allocated,
	uninitialized structure.

Sat Feb 26 17:15:16 2000  Andrew Cagney  <cagney@b1.cygnus.com>

	* MAINTAINERS: Chris Faylor is responsible for all MS Windows
 	systems.  Note that Jim Blandy as maintainer for ``tracing
 	bytecode stuff''

2000-02-25  Fernando Nasser  <fnasser@cygnus.com>

	From: Thomas Zenker <thz@Lennartz-electronic.DE>
	* rdi-share/hsys.c: to compile under 4.4BSD derived systems (FreeBSD,
	NetBSD...) sys_errlist should not be declared in hsys.c.
	NEED_SYSERRLIST is set already by configure, so we can use it.
	* rdi-share/unixcomm.c: 4.4BSD derived systems define BSD, but are
	posix compliant and we should not work with the old compatibility
	stuff.  Because of that I undef BSD in case of FBSD etc and include
	sys/ioctl to get the flags.
	* rdi-share/unixcomm.c: If the TIOCEXCL flags exists set serial line
	for exclusive use.

2000-02-24  Kevin Buettner  <kevinb@redhat.com>

	* ppc-linux-tdep.c (ppc_sysv_abi_push_arguments): Put address
	of return structure in r3 if necessary.
	(ppc_linux_memory_remove_breakpoints): New function.
	* rs6000-tdep.c (skip_prologue): Make sure that the cases
	for storing either cr or lr to the stack only handle those
	cases.  (I.e, don't let these cases match 0x00000000 which is
	found found in the shared library trampoline prior to the
	loading of the shared library.)
	* config/powerpc/tm-linux.h (ppc_linux_memory_remove_breakpoint):
	Declare.
	(MEMORY_REMOVE_BREAKPOINT): Define.

Wed Feb 23 23:27:48 2000  Andrew Cagney  <cagney@behemoth.cygnus.com>

	* hppah-nat.c: Include "gdb_wait.h" instead of <wait.h>.

Thu Feb 24 18:42:15 2000  Andrew Cagney  <cagney@b1.cygnus.com>

	* configure.in (CONFIG_INSTALL, CONFIG_UNINSTALL): Set to
 	$(SUBDIR_*_INSTALL) when so configured.
	* configure: Regenerate.
	
	* Makefile.in (CONFIG_INSTALL, CONFIG_UNINSTALL): Define using
 	configure.
	(install-only): Add dependency on $(CONFIG_INSTALL).  Delete code
 	installing GDBtk.
	(uninstall): Add dependency on $(CONFIG_UNINSTALL).
	(SUBDIR_MI_INSTALL, SUBDIR_MI_UNINSTALL, SUBDIR_GDBTK_UNINSTALL,
 	SUBDIR_GDBTK_INSTALL): Define.
	(install-gdbtk): New target.

Thu Feb 24 18:19:52 2000  Andrew Cagney  <cagney@b1.cygnus.com>

	* configure.in (SUBDIR_MI_CFLAGS): Fix typo, wrong brace.
	* configure: Regenerate.
	
2000-02-24  Christopher Faylor  <cgf@cygnus.com>

	* configure.tgt: Add arm, mips, sh wince targets.
	* config/arm/tm-wince.h: New file.
	* config/arm/wince.mt: New file.
	* config/sh/tm-wince.h: New file.
	* config/sh/wince.mt: New file.
	* config/mips/tm-wince.h: New file.
	* config/mips/wince.mt: New file.
	* wince.c: New file.
	* wince-stub.c: New file.
	* wince-stub.h: New file.
	* sh-tdep.c: Use correct register names for Windows CE.

Wed Feb 23 19:01:45 EST 2000  Nicholas Duffek <nsd@cygnus.com>

	* top.c (SIGJMP_BUF, SIGSETJMP, SIGLONGJMP): Update comments.
	(error_return, quit_return): Merge into catch_return pointer.
	(return_to_top_level): Update comment.  Longjmp to *catch_errors,
	and communicate reason to catch_errors via setjmp return value.
	(catch_errors): Always catch both quit and error, and if a catch
	wasn't requested by caller, throw it to the next catch_error.
	Replace dual longjmp buffer memcpy with single pointer change.
	Add FIXME for possibly adding new interface to tell caller what
	event was caught.  Add extensive comments.
	* defs.h (enum return_reason): Reserve 0 for use as initial
	setjmp() return value.
	(RETURN_MASK): New public macro to generate RETURN_MASK_* from
	enum return_reason.
	(RETURN_MASK_QUIT, RETURN_MASK_ERROR): Define using RETURN_MASK.

2000-02-23  Fernando Nasser  <fnasser@cygnus.com>

	* infcmd.c (run_stack_dummy): Do not pop frame on random signal.
	* valops.c (_initialize_valops): Add command "set unwindonsignal".
	(hand_function_call): Test for unwind_on_signal and act accordingly.

Wed Feb 23 12:58:46 2000  Andrew Cagney  <cagney@b1.cygnus.com>

	* gdbarch.sh (dis_asm_read_memory): Change LEN to unsigned long.
  	Match ../include/dis-asm.h change.
	* gdbarch.h: Regenerate.
	* corefile.c (dis_asm_read_memory): Update.

Mon Feb 21 13:57:27 2000  Andrew Cagney  <cagney@b1.cygnus.com>

	* configure.in (CONFIG_INITS): Fix typo, was CONFIG_INIT.
	(ENABLE_CFLAGS): Move initialization to start of file.
	(enable-gdbmi): Add new configure option --enable-gdbmi.  When
 	selected and an ${srcdir}/mi directory is present enable MI
 	interface.

	* configure: Regenerate.
	
	* Makefile.in (SUBDIR_MI_OBS, SUBDIR_MI_SRCS, SUBDIR_MI_DEPS,
 	SUBDIR_MI_INITS, SUBDIR_MI_LDFLAGS, SUBDIR_MI_CFLAGS): New macros.
	(CONFIG_OBS, CONFIG_SRCS, CONFIG_DEPS, CONFIG_INITS,
 	CONFIG_LDFLAGS): New macros.  Initialized by autoconf via
 	@CONFIG...@.
	(INTERNAL_LDFLAGS, CDEPS, LINTFILES, DEPFILES, SOURCES,
 	INIT_FILES): Use $(CONFIG_...) instead of @CONFIG...@.

	* mi: New directory. MI interface to GDB.

	* defs.h (interpreter_p): Declare when UI_OUT.
	* top.c (gdb_init): When interpreter_p, check that the interpreter
 	was recognized by one of the linked in interpreters.
	* main.c (interpreter_p): Define.
	(captured_main): When UI_OUT, check for ``-i <interpreter>'' option.
	* event-top.c (display_gdb_prompt): When interpreter_p, assume
 	interpreter displays prompt.

	* breakpoint.c (print_it_typical, watchpoint_check,
 	print_one_breakpoint, mention): When MI include additional
	target status information.
	* infrun.c (print_stop_reason, normal_stop): Ditto.

2000-02-22  Jim Blandy  <jimb@redhat.com>

	* gdbarch.sh: Make the `default' field really default to zero, as
 	documented.

	Bring COERCE_FLOAT_TO_DOUBLE under gdbarch's control.
	* valops.c (COERCE_FLOAT_TO_DOUBLE): Rework definition to be
	more function-like.
	(default_coerce_float_to_double, standard_coerce_float_to_double):
	New functions.
	(value_arg_coerce): Adjust for new definition.
	* value.h (default_coerce_float_to_double,
	standard_coerce_float_to_double): New declarations for the above.
	* gdbarch.sh (coerce_float_to_double): New entry, replacing macro.
	* gdbarch.c, gdbarch.h: Regenerated.
	* tm-alpha.h, tm-fr30.h, tm-m32r.h, tm-mips.h, tm-hppa.h,
 	tm-rs6000.h, tm-sh.h, tm-sparc.h (COERCE_FLOAT_TO_DOUBLE): Change
 	definitions.
	* mips-tdep.c (mips_coerce_float_to_double): Supply our own custom
	function here.
	(mips_gdbarch_init): Install that as our coerce_float_to_double
	function.

2000-02-22  Kevin Buettner  <kevinb@redhat.com>

	* ppc-linux-nat.c (supply_gregset, supply_fpregset): Add return
	type.
	* ppc-linux-tdep.c (ppc_linux_at_sigtramp_return_path): Add
	forward declaration.

	* ppc-linux-tdep.c (ppc_linux_frame_saved_pc): Handle case
	where the next frame is a signal handler caller.

	* config/powerpc/tm-linux.h (PUSH_ARGUMENTS): Remove extraneous
	undef.
	(tm-linux.h): Include.
	(tm-sysv4.h): Don't include (directly).  config/tm-linux.h will
	include this file for us.
	(REALTIME_LO, REALTIME_HI): Don't define.  These are defined by
	config/tm-linux.h for us.
	(SOFUN_ADDRESS_MAYBE_MISSING): Define.

2000-02-21  Kevin Buettner  <kevinb@redhat.com>

	* Makefile.in (ppc-linux-nat.c, ppc-linux-tdep.c): New files.
	(ppc-linux-nat.o, ppc-linux-tdep.o): Add dependencies.
	* configure.tgt (powerpc-*-linux*): Separate from powerpc-*-eabi
	and like targets.

	* ppc-linux-nat.c, ppc-linux-tdep.c, config/powerpc/linux.mt,
	config/powerpc/nm-linux.h, config/powerpc/tm-linux.h: New files.
	* config/powerpc/xm-linux.h: Substantially revised for native
	port.
	* config/powerpc/linux.mh (NAT_FILE): Redefine to be nm-linux.h.
	(NATDEPFILES): Update list to reflect the fact that we can
	now debug natively.

	* rs6000-tdep.c, config/rs6000/tm-rs6000.h
	(rs6000_frameless_function_invocation, rs6000_frame_saved_pc):
	Renamed; The former names were lacking the rs6000_ prefix.
	* rs6000-tdep.c (rs6000_frame_saved_pc): Call FRAME_CHAIN
	instead of rs6000_frame_chain.
	(rs6000_frame_chain): Call FRAMELESS_FUNCTION_INVOCATION instead
	of rs6000_frameless_function_invocation.

2000-02-21  Elena Zannoni  <ezannoni@kwikemart.cygnus.com>

	From Philippe De Muyter  <phdm@macqel.be>

	* event-loop.c (handle_file_event): In case of poll, enable
 	printing of informational message if an error/exception is
 	detected on the file descriptor.

2000-02-21  Jim Kingdon  <kingdon@redhat.com>

	* MAINTAINERS (Misc): Clarify that yes, anyone can edit web pages.

Mon Feb 21 12:50:57 2000  Andrew Cagney  <cagney@b1.cygnus.com>

	* buildsym.c: Include "language.h" and "expression.h" for
 	longest_local_hex_string_custom.

Mon Feb 21 11:17:18 2000  Andrew Cagney  <cagney@b1.cygnus.com>

	* gdbarch.sh: Include <gdb_wait.h> instead of <wait.h>.
	* gdbarch.c: Already updated by Wed Feb 9 18:59:16 2000 Andrew
 	Cagney <cagney@b1.cygnus.com>.

Mon Feb 21 11:03:01 2000  Andrew Cagney  <cagney@b1.cygnus.com>

	* MAINTAINERS: Update: IA-64 - Kevin Buettner; ARM - Fernando
 	nasser, Jim Ingham and Scott Bambrough; GNU/Linux ARM - Scott
 	Bambrough; event loop - Elena Zannoni; SDS and RDI/APD protocol -
 	to Fernando Nasser and Jim Ingham; KOD - Fernando Nasser; MI -
 	Andrew Cagney, Elena Zannoni and Fernando Nasser; Web pages - Jim
 	Kingdon.
	* MAINTAINERS: Add Nick Clifton to write after approval list.
	
Mon Feb 21 10:30:39 2000  Andrew Cagney  <cagney@b1.cygnus.com>

	* MAINTAINERS: Add note on multiple maintainers.

2000-02-19  Philippe De Muyter  <phdm@macqel.be>

        * cli-out.c (cli_table_header): Type of parameter `alignment' is
        `enum ui_align', not `int'.
        (cli_field_string, cli_field_skip): Likewise.

2000-02-18  Jim Blandy  <jimb@redhat.com>

	From Jimmy Guo <guo@cup.hp.com>:
	* buildsym.h (add_free_pendings): Declare.
	* buildsym.c (add_free_pendings): New function.
	(make_blockvector): 32x64 fix using longest_local_hex_string().
	(start_subfile): initialize variable 'subfile'.

2000-02-18  Elena Zannoni  <ezannoni@kwikemart.cygnus.com>

	* remote.c (remote_async_detach): Use target_mourn_inferior(), to
 	make sure that all is cleaned up after we disconnect from the
 	target.
	(remote_detach): Ditto.

2000-02-17  Fernando Nasser  <fnasser@totem.to.cygnus.com>

	From Rodney Brown  <RodneyBrown@pmsc.com>
	* ui-out.c (ui_out_set_flags): Fix typo, removing warning and
	potentially harming mistake.

2000-02-17  Fernando Nasser  <fnasser@totem.to.cygnus.com>

	* arm-tdep.c: Use header file instead of extern declarations for
	the {get,set}_arm_regname* functions.

2000-02-16  Fernando Nasser  <fnasser@totem.to.cygnus.com>

	* configure.in: Replaces obsolete gdbtk-variable.c with
	gdbtk-varobj.c.
	* configure: Regenerate.
	* Makefile.in: Remove obsolete/extraneous references to
	gdbtk-var* files.

2000-02-16  Mark Kettenis  <kettenis@gnu.org>

	* target.c (do_target_signal_to_host): Do not use REALTIME_LO in
	the conversion of the signal number.  TARGET_SIGNAL_REALTIME_33 is
	33 by definition, whereas REALTIME_LO might be 32 on systems that
	have SIG32 such as Linux.  Make sure that the signal number
	returned is within the range specified by REALTIME_LO and
	REALTIME_HI.

2000-02-16  Mark Kettenis  <kettenis@gnu.org>

	* configure: Regenerated.

2000-02-16  Fernando Nasser  <fnasser@totem.to.cygnus.com>

	* arm-tdep.c (set_disassembly_flavor, arm_othernames,
	_initialize_arm_tdep): Allows the user to choose between any of
	the flavors available for the disassembly to be used in the "info
	reg" command and elsewhere in gdb.  It prevents having to maintain
	this information in two places by using the data kept in the
	opcodes directory.

2000-02-09  Mark Kettenis  <kettenis@gnu.org>

	* configure.in: Check for lwpid_t, psaddr_t, prgregset_t and
	prfpregset_t in <sys/procfs.h>.
	* config.in: Add HAVE_LWPID_T, HAVE_PSADDR_T, HAVE_PRGREGSET_T,
	HAVE_PRFPREGSET_T.
	* gdb_proc_service.h: Only provide typedefs for lwpid_t, psaddr_t,
	prgregset_t and prfpregset_t if they are not already present.

Wed Feb 16 19:00:02 2000  Andrew Cagney  <cagney@b1.cygnus.com>

	From 2000-01-26 Rodney Brown <RodneyBrown@pmsc.com>:
        * procfs.c: Define MERGEPID if not defined. For osf4.0e.

2000-02-15  Jason Molenda  (jsm@bugshack.cygnus.com)

	* Makefile.in (diststuff): Run 'diststuff' in doc/ subdir, not
	'do-doc'.

2000-02-15  Kevin Buettner  <kevinb@redhat.com>

	Changes for AIX 4.3:
	* rs6000-tdep.c (rs6000_fix_call_dummy): Set TOC register
	to correct value for generic dummy frames.  When using
	generic dummy frames, don't attempt to write TOC value or
	function to call into the call dummy.
        (rs6000_push_arguments): Adapt USE_GENERIC_DUMMY_FRAMES
	code to also handle the PowerOpen ABI.
	(ppc_push_return_address): Enable for all ports.
	* config/powerpc/tm-ppc-aix.h (USE_GENERIC_DUMMY_FRAMES,
	PUSH_DUMMY_FRAME, PUSH_RETURN_ADDRESS, GET_SAVED_REGISTER, 
	CALL_DUMMY_BREAKPOINT_OFFSET, CALL_DUMMY_LOCATION,
	CALL_DUMMY_ADDRESS, CALL_DUMMY_START_OFFSET): Override defaults
	provided by generic RS6000 definitions so that call dummies
	are implemented using generic dummy frames instead.

	* rs6000-nat.c (store_inferior_registers): Call exec_one_dummy_insn()
	prior to changing the stack pointer via ptrace().  Also, ignore
	attempts to store to undefined registers that are less than
	NUM_REGS.

	* rs6000-tdep.c (DUMMY_FRAME_SIZE): Change size of the dummy
	frame from 436 to 448 to account for alignment padding.
	(rs6000_push_arguments): Obtain actual register size instead
	of assuming the register is 4 bytes long.  [There's still
	more work to be done to totally remove the 4 byte assumption,
	however.]  Make sure the stack is 16 byte aligned as required
	by the PowerOpen ABI.  Also, make sure that small structures
	passed in registers are properly aligned within the register.

2000-02-15  Jesper Skov  <jskov@cygnus.co.uk>

	Patch applied by Kevin Buettner <kevinb@redhat.com>
	
	* rs6000-tdep.c (skip_prologue): skip copying of argument
	registers to local variable registers.

2000-02-14  Jim Kingdon  <kingdon@redhat.com>

	* elfread.c (elf_symtab_read): Revert changes by Amit S. Kale.  A
	sym->section->index number is not a SECT_OFF_* code.

Tue Feb 15 12:07:30 2000  Andrew Cagney  <cagney@b1.cygnus.com>

	* MAINTAINERS (write after approval): Add H.J. Lu.

2000-02-14  Nick Clifton  <nickc@cygnus.com>

	* sh-tdep.c: Remove extraneous code.

2000-02-14  Amit S. Kale  <akale@veritas.com>

	* elfread.c (elf_symtab_read): Move the use of sym to after where
	it is set.
	Checked in by Jim Kingdon  <kingdon@redhat.com>

Mon Feb 14 15:39:01 2000  Andrew Cagney  <cagney@b1.cygnus.com>

	* MAINTAINERS: Make Nick Duffek the UnixWare threads maintainer.

Mon Feb 14 15:20:26 2000  Andrew Cagney  <cagney@b1.cygnus.com>

	From 1999-11-24 Jason Merrill <jason@casey.cygnus.com>:
	* dwarf2read.c: (die_is_declaration): New fn.
	(read_structure_scope): Use it.

	* dwarf2read.c: (die_is_declaration): Convert to ISO-C.

2000-02-10  J.T. Conklin  <jtc@redback.com>

	* config/i386/nbsd.mt (GDBSERVER_DEPFILES): Add low-nbsd.o
	* configure.tgt (i[3456]86-*-netbsd*): add gdbserver to
 	configdirs.
	* gdbserver/low-nbsd.c: New file.
	
	* gdbserver/Makefile.in: convert to autoconf.
	* gdbserver/configure.in: likewise.
	* gdbserver/configure: generate.

Sun Feb 13 11:21:00 2000  Andrew Cagney  <cagney@b1.cygnus.com>

	* CONTRIBUTE: New file.  How to contribute to GDB.

Sun Feb 13 10:34:48 2000  Andrew Cagney  <cagney@b1.cygnus.com>

	* MAINTAINERS: Add Eli Zaretskii to djgpp maintiners.  Add Kevin
 	Buettner to powerpc maintainers.  Make Kevin Buettner the
 	GNU/LINUX PPC native maintainer.  Add J.T. Conklin, Jim Kingdon
 	and Jason Molenda to write after aproval list.

Sun Feb 13 10:18:44 2000  Andrew Cagney  <cagney@b1.cygnus.com>

	* MAINTAINERS: Reformat.  Separate into check-in categories.

Sat Feb 12 01:08:21 EST 2000  Nicholas Duffek <nsd@cygnus.com>

	* uw-thread.c: Remove __FUNCTION__ GNUism.

2000-01-17  Amit S. Kale  <akale@veritas.com>

	* elfread.c (elf_symtab_read): Use offset for the section in which a
	symbol resides, instead of .text section for calculating address of a
	symbol.
	Checked in by Jim Kingdon  <kingdon@redhat.com>

2000-02-10  Mark Kettenis  <kettenis@gnu.org>

	* gnu-nat.c: Remove hackery to include <bits/waitflags.h>.  It is
	no longer necessary now we have gdb_wait.h.

2000-02-09  Mark Kettenis  <kettenis@gnu.org>

	* gnu-nat.c (proc_string): Make global.
	(do_mach_notify_dead_name): Suppress dead name notifications if we
	know that the task is dead.

1999-12-13  Mark Kettenis  <kettenis@gnu.org>

	* gnu-nat.c (inf_validate_task_sc): Get task info via proc server
	instead of directly from the kernel.  Add some hackery to make
	sure that the info isn't influenced by suspension of the task in
	the proc server itself.

2000-02-10  Jim Kingdon  <kingdon@redhat.com>

	* defs.h (MERGEPID): Added.  Patch submitted by Andrew Hobson and
	approved by Michael Snyder.

2000-02-09  Mark Kettenis  <kettenis@gnu.org>

        * linux-thread.c: Include defs.h before gdb_wait.h.

Wed Feb  9 18:59:16 2000  Andrew Cagney  <cagney@b1.cygnus.com>

	* Makefile.in (wait_h): Delete macro.  Update all dependencies
 	specifying gdb_wait.h instead.

	* ser-unix.c, ser-pipe.c, remote.c, remote-udi.c, remote-sds.c,
 	remote-os9k.c, remote-es.c, remote-rdp.c, remote-vx960.c,
 	remote-vx.c, remote-st.c, remote-nindy.c, remote-mm.c,
 	convex-xdep.c, convex-tdep.c, target.c, win32-nat.c, standalone.c,
 	remote-vxmips.c, remote-vxsparc.c, remote-vx68.c, remote-vx29k.c,
 	remote-sim.c, remote-rdi.c, remote-mips.c, remote-eb.c,
 	remote-e7000.c, remote-bug.c, remote-array.c, remote-adapt.c,
 	ppc-bdm.c, ocd.c, monitor.c, m3-nat.c, linux-thread.c,
 	infttrace.c, lin-thread.c, infptrace.c, gnu-nat.c, gdbarch.c,
 	fork-child.c, command.c: Include "gdb_wait.h" instead of <wait.h>
 	or <sys/wait.h>.
	* nindy-share/nindy.c, nindy-share/Onindy.c: Ditto.

	* gdb_wait.h: New file.  Based on ../include/wait.h. Include
 	<sys/wait.h> or <wait.h> and then define any missing WIF macros.

Wed Feb  9 01:14:54 2000  Andrew Cagney  <cagney@amy.cygnus.com>

	* config/d10v/tm-d10v.h (NO_EXTRA_ALIGNMENT_NEEDED): Define.
	* config/d10v/tm-d10v.h (STACK_ALIGN): Define.
	(d10v_stack_align): Declare.
	* d10v-tdep.c (d10v_stack_align): Define.

1999-08-23  J.T. Conklin  <jtc@redback.com>

        * top.c (remote_timeout): Change default to 2.  Add comment
        explaining history of changes to the default value.
        * remote.c (_initialize_remote): Remove code that adds set/
        show remotetimeout, as that's also done in top.c

1999-10-18  J.T. Conklin  <jtc@redback.com>

        * m32r-stub.c, sparcl-stub.c, sparclet-stub.c (handle_exception):
        Return E01 instead of P01 when 'P' command fails.

2000-02-05  J.T. Conklin  <jtc@redback.com>

	* remote.c (putpkt_binary): Handle NAK from target stub.

2000-02-08  Elena Zannoni  <ezannoni@kwikemart.cygnus.com>

	* configure.in: Remove the addition of sol-thread.c to the
	CONFIG_INITS list. This caused problems with init.c, because
	sol-thread.c would be grepped twice for _initialize_* functions.
	* configure: Ditto.
	* Makefile.in: Add FIXME for init.c.

2000-02-07  Jim Kingdon  <kingdon@redhat.com>

	Clean up compiler warnings:
	* bcache.h, bcache.c, c-valprint.c, coffread.c, stabsread.c,
	stack.c, valprint.c: Change variables to unsigned.
	* bcache.c: Rearrange to avoid warnings about variables not being set.
	* c-lang.c, ch-lang.c, f-lang.c, m2-lang.c: Include valprint.h
	rather than declaring print_max and repeat_count_threashold
	ourselves (incorrectly).
	* valprint.h: Do declare repeat_count_threashold.
	* ch-exp.c: Use default case for internal error.
	* findvar.c: Don't omit argument type.
	* symtab.c: Remove unused variable.

2000-02-04  Jim Blandy  <jimb@redhat.com>

	* c-typeprint.c (remove_qualifiers): New function.
	(c_type_print_base): Use it to remove qualifiers from C++
	qualified names, not strrchr.

	* c-typeprint.c (c_type_print_base): Recognize type conversion
	operators by calling is_type_conversion_operator.
	(is_type_conversion_operator): New function.

2000-02-04  Nick Clifton  <nickc@cygnus.com>

	* config/arm/tm-arm.h (LOWEST_PC): Define.

2000-02-04  Elena Zannoni  <ezannoni@kwikemart.cygnus.com>

	* infrun.c (resume): Make just one call to target_resume(), instead
 	of four: set up correct parameters in all the cases ahead of time,
 	and do call at the end.

2000-02-04  Elena Zannoni  <ezannoni@kwikemart.cygnus.com>

	* config/powerpc/tm-ppc-eabi.h: Define
 	SOFUN_ADDRESS_MAYBE_MISSING.

2000-02-04  Fernando Nasser  <fnasser@totem.to.cygnus.com>

	* arm-tdep.c (arm_pc_is_thumb_dummy): Account for large dummy
	frames (revisited).

Fri Feb  4 22:42:36 2000  Andrew Cagney  <cagney@b1.cygnus.com>

	* Makefile.in (INIT_FILES): Append CONFIG_INITS
	* configure.in (CONFIG_INIT): Initialize.
	(links): Link srcdir/gdbtk/library to gdbtcl2.
	* gdbtcl2: Moved to gdbtk/library.
	ChangeLog-gdbtk, gdbtk-cmds.c, gdbtk-hooks.c, gdbtk-variable.c,
 	gdbtk-varobj.c, gdbtk-wrapper.c, gdbtk-wrapper.h, gdbtk.c,
 	gdbtk.h: Moved to gdbtk/generic.

2000-02-03  Elena Zannoni  <ezannoni@kwikemart.cygnus.com>

	* printcmd.c (build_address_symbolic): New function. Returns all
 	the parts that are necessary to print an address in a symbolic
 	form.
	(print_address_symbolic): Split into a printing part and an
 	information building part, build_address_symbolic().

	* defs.h (build_address_symbolic): Export.

2000-02-03  Jim Blandy  <jimb@redhat.com>

	* dwarf2read.c (decode_locdesc): Add support for the DW_OP_bregx
	opcode.

2000-02-02  Fernando Nasser  <fnasser@totem.to.cygnus.com>

	* arm-tdep.c (arm_push_arguments): Fix passing of floating point
	arguments on dummy frames.

2000-02-02  Fernando Nasser  <fnasser@totem.to.cygnus.com>

	* arm-tdep.c (arm_pc_is_thumb_dummy): Account for large dummy frames.
	(arm_pop_frame): Account fr dummy frames (as opposed to real ones).

2000-02-01  Elena Zannoni  <ezannoni@kwikemart.cygnus.com>

	* remote.c (getpkt_sane): New function. It is the old getpkt(),
 	which now returns a timeout indication.
	(getpkt): New function. Wrapper for getpkt_sane(), so that return
 	value can still be ignored.

Tue Feb  1 18:47:31 2000  Andrew Cagney  <cagney@b1.cygnus.com>

	* top.c (print_gdb_version): Print ``UI_OUT'' when configured with
 	UI_OUT.

Tue Feb  1 00:17:12 2000  Andrew Cagney  <cagney@b1.cygnus.com>

	* ui-file.c, ui-file.h: Rename gdb-file.h, gdb-file.c.  Rename
 	``struct gdb_file'' to ``struct ui_file''.  Delete typedef
 	GDB_FILE.
	
	* Makefile.in: Update.

	* ax-gdb.c, ax-general.c, ax.h, buildsym.c, c-lang.c, c-lang.h,
 	c-typeprint.c, c-valprint.c, ch-lang.c, ch-lang.h, ch-typeprint.c,
 	ch-valprint.c, command.c, command.h, convex-tdep.c, corefile.c,
 	cp-valprint.c, d10v-tdep.c, d30v-tdep.c, defs.h, expprint.c,
 	expression.h, f-lang.c, f-lang.h, f-typeprint.c, f-valprint.c,
 	frame.h, gdb-events.sh, gdb-file.c, gdb-file.h, gdbcmd.h,
 	gdbtypes.h, hppa-tdep.c, jv-lang.c, jv-lang.h, jv-typeprint.c,
 	jv-valprint.c, language.c, language.h, m2-lang.c, m2-lang.h,
 	m2-typeprint.c, m2-valprint.c, m3-nat.c, main.c, monitor.c,
 	printcmd.c, pyr-tdep.c, remote-mips.c, remote-sim.c, remote-udi.c,
 	remote.c, scm-lang.c, scm-lang.h, scm-valprint.c, ser-e7kpc.c,
 	ser-go32.c, ser-mac.c, ser-ocd.c, ser-unix.c, ser-unix.h,
 	serial.c, serial.h, stack.c, symfile.c, symmisc.c, tahoe-tdep.c,
 	target.c, target.h, top.c, top.h, typeprint.c, typeprint.h,
 	utils.c, v850ice.c, valprint.c, valprint.h, value.h,
 	config/pa/tm-hppa.h: Update.
	* cli-out.c, cli-out.h, ui-out.c, ui-out.h, varobj.c: Update.

2000-01-31  Jason Molenda  (jsm@bugshack.cygnus.com)

	* config/alpha/alpha-osf2.mh, config/alpha/alpha-osf3.mh,
	config/i386/i386dgux.mh, config/i386/i386sol2.mh,
	config/i386/i386v4.mh, config/i386/i386v42mp.mh,
	config/i386/ncr3000.mh, config/m68k/m68kv4.mh,
	config/m88k/delta88v4.mh, config/mips/irix4.mh,
	config/mips/irix5.mh, config/mips/mipsv4.mh,
	config/powerpc/solaris.mh (NATDEPFILES): Change references to
	proc_api.o, proc_events.o, proc_flags.o, and proc_why.o to
	proc-api.o, proc-events.o, proc-flags.o, and proc-why.o.

Mon Jan 31 17:14:52 2000  Andrew Cagney  <cagney@b1.cygnus.com>

	* top.c (fputs_unfiltered_hook): Moved to tui/tui-file.c.

	* main.c (captured_main): Only use the legacy tui_file code when
 	linking in older code such as the TUI.

	* gdb-file.h, gdb-file.c: New files.
	* utils.c, defs.h (struct gdb_file, gdb_file_new, gdb_file_delete,
 	null_file_isatty, null_file_rewind, null_file_put,
 	null_file_flush, null_file_write, null_file_fputs,
 	null_file_delete, gdb_file_data, gdb_flush, gdb_file_isatty,
 	gdb_file_rewind, gdb_file_put, gdb_file_write, fputs_unfiltered,
 	set_gdb_file_flush, set_gdb_file_isatty, set_gdb_file_rewind,
 	set_gdb_file_put, set_gdb_file_write, set_gdb_file_fputs,
 	set_gdb_file_data, struct accumulated_gdb_file,
 	do_gdb_file_xstrdup, gdb_file_xstrdup, struct mem_file):
 	mem_file_new, mem_file_delete, mem_fileopen, mem_file_rewind,
 	mem_file_put, mem_file_write, struct stdio_file): stdio_file_new,
 	stdio_file_delete, stdio_file_flush, stdio_file_write,
 	stdio_file_fputs, stdio_file_isatty, stdio_fileopen, gdb_fopen):
 	Moved to gdb-file.h and gdb-file.c.
	* utils.c (enum streamtype, struct tui_stream, tui_file_new,
 	tui_file_delete, tui_fileopen, tui_sfileopen, tui_file_isatty,
 	tui_file_rewind, tui_file_put, tui_file_fputs,
 	tui_file_get_strbuf, tui_file_adjust_strbuf, tui_file_flush,
	fputs_unfiltered_hook):
 	Moved to tui/tui-file.c and tui/tui-file.h.
	
	* Makefile.in (COMMON_OBS): Add gdb-file.o, tui-file.o.
	(tui-file.o, gdb-file.o): Add dependencies.
	(corefile.o, main.o, utils.o, simmisc.o): Update dependencies.
	* main.c: #include tui/tui-file.h.

2000-01-28  Fred Fish  <fnf@cygnus.com>

	* findvar.c (value_from_register): Special case handling of D10V
	pointer values fetched from registers.

2000-01-28  Fernando Nasser  <fnasser@totem.to.cygnus.com>

	* arm-tdep.c (thumb_skip_prologue, thumb_scan_prologue): Add
	support for new style thumb prologues.

2000-01-28  Nick Clifton  <nickc@redhat.com>

	* arm-tdep.c: Remove extraneous dash at start of strings
	introduced in previous delta.

2000-01-27  Nick Clifton  <nickc@redhat.com>

	* arm-tdep.c: Replace uses of arm_toggle_renames() with
	parse_arm_disassembler_option().

2000-01-27  Jim Blandy  <jimb@cygnus.com>

	* symtab.c (decode_line_1): Don't let commas that are within
 	quotes or parenthesis terminate the line spec.  Don't use pp when
 	removing the final double quote of a double-quoted string.  Don't
 	forget to skip the opening double quote.  I have no clue whether
 	this change is correct; probably we've just moved this function
 	from one buggy place to another buggy place, and never came within
 	an outhouse whiff of correctness.
	(find_toplevel_char): New function.

2000-01-27  Fernando Nasser  <fnasser@totem.to.cygnus.com>

	* arm-tdep.c (arm_push_arguments): Set the thumb mode bit when
        passing the pointer to a thumb function as an argument.

2000-01-27  Fernando Nasser  <fnasser@totem.to.cygnus.com>

	* remote-rdi.c (arm_rdi_mourn_inferior): Make sure breakpoints
	are reinserted for another run.

2000-01-27  Fernando Nasser  <fnasser@totem.to.cygnus.com>

	* cli-out.c (cli_filed_string): Test for NULL string.

2000-01-27  Fernando Nasser  <fnasser@totem.to.cygnus.com>

	* infcmd.c (run_stack_dummy): Account for a random signal stopping
	the inferior as well as breakpoints being hit while performing an
	inferior function call.
	* valops.c (hand_function_call): Ditto.

2000-01-27  Elena Zannoni  <ezannoni@kwikemart.cygnus.com>

	From  Mark Kettenis  <kettenis@gnu.org>

	* config/i386/tm-i386gnu.h (THREAD_STATE_FLAVOR): Define to
	i386_REGS_SEGS_STATE.
	(HAVE_I387_REGS): Define.
	(FLOAT_INFO): Remove.
	* i386gnu-nat.c: Almost completely rewritten to use new i386
	register layout and `float info' implementation.
	* gnu-nat.c (inf_update_procs, proc_get_state, proc_string):
	Move prototypes from here.
	* gnu-nat.h: To here.

2000-01-24  Kevin Buettner  <kevinb@redhat.com>

	* utils.c (get_field, put_field): Fix buffer underruns and
	overruns.  Also, handle case where total_len is not evenly
	divisible by 8.
	(getfield): Make sure zeroing of unwanted bits occurs even
	when bit field to extract does not straddle two or more
	bytes.

2000-01-23   Christopher Faylor  <cgf@cygnus.com>

	* defs.h: Add gdb_thread_select declaration.

2000-01-23  Kevin Buettner  <kevinb@redhat.com>

	* linux-thread.c (_initialize_linuxthreads): Make sure that
	linuxthreads_block_mask does not block SIGCHLD.

2000-01-20  Fernando Nasser  <fnasser@totem.to.cygnus.com>

	* rdi-share/devsw.c (openLogFile): On cygwin, set the log mode to
	text so that new lines work properly.

2000-01-18  Elena Zannoni  <ezannoni@kwikemart.cygnus.com>

	* proc-utils.h: New file. Export functions from proc-*.c.

	* proc_api.c: Rename to:
	* proc-api.c: New file. Add include of proc-utils.h.

	* proc_events.c: Rename to:
	* proc-events.c: New file.

	* proc_flags.c: Rename to:
	* proc-flags.c: New file.

	* proc_why.c: Rename to:
	* proc-why.c: New file. Add include of proc-utils.h.

	* procfs.c: Add includes of gdbthread.h, sys/wait.h, signal.h,
 	ctype.h, proc-utils.h.
	(find_procinfo_or_die): Add braces to avoid ambiguous else clause.
	(open_procinfo_files): Conditionalize local variable tmp, to avoid
 	compiler warnings.
	(proc_iterate_over_mappings): Conditionalize local vars mapfd and
 	pathname.
	(procfs_wait): Adjust format in some printf_filetered calls to
 	avoid compiler warnings.
	(make_signal_thread_runnable): Ifdef 0. The calls to this function
 	are also ifdef'd 0 .
	(procfs_resume): Add parentheses around '&&' operation.
	(procfs_set_exec_trap): Remove unused variable.
	(info_proc_cmd): Add braces to avoid ambiguous else clause.

	* Makefile.in (procfs.o, proc-api.o, proc-events.o, proc-flags.o,
 	proc-why.o): Update dependencies.

	* config/sparc/sun4sol2.mh (NATDEPFILES): Change proc_*.o files to
	proc-*.o.

2000-01-17  Jason Molenda  (jsm@bugshack.cygnus.com)

	* configure.in (NEW_PROC_API): Fix Unixware-matching regexp.
	Fix from Robert Lipe <robertl@sco.com>.
	* configure: Regenerated.

2000-01-17  Elena Zannoni  <ezannoni@kwikemart.cygnus.com>

	* stack.c (print_frame_info_base): Break up into the frame info
 	(location) printing part and the rest (source line printing).
	(print_frame): New function. Take care of printing the location
 	information.
	Update copyright.

	* infrun.c (normal_stop): Use enum values rather than integers for the
	source_flag to be passed to show_and_print_stack_frame().
        Update copyright.
	
	* frame.h (print_what): New enum for 'source' argument to
 	print_frame_info_base(). Use this instead of obscure numbers.
	Update copyright.
	
Sun Jan 16 17:58:00 2000  David Taylor  <taylor@texas.cygnus.com>

	* event-top.c (stdin_event_handler): call quit_command rather than
 	exit -- run cleanups, give target code a chance to say goodbye to
 	the target.  Fixes bug where the inferior processes were left
 	around on Solaris (and probably elsewhere) by the testsuite.

2000-01-14  Mark Salter  <msalter@cygnus.com>

	* v850-tdep.c (v850_target_architecture_hook): Setup correct
 	machine id for disassembly.

2000-01-13  Jim Blandy  <jimb@cygnus.com>

	* i386-linux-nat.c (fill_gregset): Pass the correct arguments to
	convert_to_regset, when regno indicates a specific register.

Thu Jan 13 23:34:17 EST 2000  Nicholas Duffek <nsd@cygnus.com>

	* uw-thread.c: Document libthread.so debugging interface.  Minor
	comment and formatting tweaks.
	(DEBUG): #define as 0 instead of 1.
	(CALL_BASE): Include function name in error msg.
	(libthread_stub): Adjust inferior_pid after thread exit.
	(uw_thread_create_inferior): Deactivate uw_thread_ops before
	asking procfs_ops to create inferior.
	(libthread_init): Don't return nonlocally on error.

2000-01-12  Fernando Nasser  <fnasser@totem.to.cygnus.com>

	* rdi-share/ardi.c (negotiate_params): Fix initialization of static
	variable.

2000-01-12  Fernando Nasser  <fnasser@totem.to.cygnus.com>

	* remote-rdi.c (arm_rdi_open): Call arm-rdi-close() to make sure
	both sides are on the same state.

2000-01-12  Fernando Nasser  <fnasser@totem.to.cygnus.com>

	* rdi-share/serdrv.c (find_baud_rate): Fix entries for 57600 and
	115200 (minor syntax mistake).

2000-01-12  Jim Blandy  <jimb@cygnus.com>

	* config/sparc/tm-sun4sol2.h (MERGEPID): Provide a definition for
	this here, to go along with the definitions of PIDGET and TIDGET.

2000-01-12  Elena Zannoni  <ezannoni@kwikemart.cygnus.com>

	* thread.c (do_captured_thread_select): New function. Switch
 	current thread, safely from within catch_errors().
	(gdb_thread_select): New function. Switch threads safely.
	(thread_command): Use gdb_thread_select().
	Include ui-out.h.
	(do_captured_list_thread_ids): New function.
	(gdb_list_thread_ids): New function.

	* defs.h (gdb_thread_select, gdb_list_thread_ids): Export.

2000-01-11  Christopher Faylor <cgf@cygnus.com>

	* configure.in: Avoid linking -limagehlp unless it's a native build.
	* configure: Regenerate.
	* thread.cc (add_thread): Clear private data pointer here or suffer
	strange behavior when it is checked for NULL later.

2000-01-09  Christopher Faylor  <cgf@cygnus.com>

	* win32nat.c (handle_exceptions): Handle various arithmetic exceptions.
	* configure.in: Add an additional library to cygwin link.
	* configure: Regenerate.

	Patch from Egor Duda <deo@logos-m.ru>:
	* coffread.c (coff_symfile_read): Reinstate ability to recognize "pe"
	type.

2000-01-07  Michael Snyder  <msnyder@cleaver.cygnus.com>

	* uw-thread.c: New file to support UnixWare user-mode threads:
	contributed by Nickolas Duffek  <nsd@cygnus.com>.
	* target.h (struct target_ops): New vector, to_extra_thread_info,
	allows back-ends to give extra details in info thread display.
	(target_extra_thread_info): define new macro.
	(target_find_new_threads): simplify macro.  Cleanup comments.
	* target.c (to_extra_thread_info): default and inherit new vector.
	(cleanup_target): eliminate PARAMS, break up long lines,
	provide default definition for to_extra_thread_info, and
	to_find_new_threads.  Default to_thread_alive and to_query
	to return_zero, not target_ignore (they each return int not void).
	(debug_to_find_new_threads): new debug entry.
	(setup_target_debug): add debug_to_find_new_threads.
	* gdbthread.h: export struct thread_info, find_thread_pid, and
	iterate_over_threads.  Add comments.  Eliminate PARAMS.  Update
	copyright.  Add new private data pointer for use by target back-ends.
	* thread.c (struct thread_info): move definition to gdbthread.h.
	(find_thread_pid): new exported function for thread lookup.
	(iterate_over_threads): new exported function for applying
	arbitrary operations to threads.  Update copyright to 2000.
	(info_threads_command): use new target_extra_thread_info vector
	to display extra information about each thread (if implemented).
	* config/i386/tm-i386v42mp.h: remove obsolete #defines for procfs.
	Add defines for PIDGET, etc.
	* config/i386/tm-i386sol2.h: ditto.
	* config/sparc/tm-sun4sol2.h: ditto.
	* config/i386/i386v42mp.mh: add uw-thread.o to NATDEPFILES.
	* testsuite/gdb.threads/pthreads.exp: Try to link with -lthread
	if -lpthread and -lpthreads fail.

	* procfs.c: (PIDGET, TIDGET, MERGEPID): change default to no-op.
	(proc_flags): combine flags that UnixWare splits into two locations.
	(proc_modify_flag): add support for PR_KLC (kill on last close).
	(proc_[un]set_kill_on_last_close): new functions.
	
2000-01-07  Elena Zannoni  <ezannoni@kwikemart.cygnus.com>

	* infrun.c (normal_stop): Print out thread id when we stop.

2000-01-06  Fernando Nasser  <fnasser@totem.to.cygnus.com>

	* remote.c (remote_open_1): Fix message so it does not imply a
	specific syntax for serial ports, as it is OS dependent.
	(remote_async_open_1): Ibid.
	(init_remote_ops): Ibid.

2000-01-06  Fernando Nasser  <fnasser@totem.to.cygnus.com>

	* rdi-share/serdrv.c (SerialOpen): Use speed from "-b" argument or
	"set remotebaud" command (if set) when no speed is specified on
	the "target rdi" command.

2000-01-06  Fernando Nasser  <fnasser@totem.to.cygnus.com>

	* rdi-share/serdrv.c (find_baud_rate): Add entries for 57600 and
	115200.
	(baud_options[]): Ibid.

2000-01-06  Fernando Nasser  <fnasser@totem.to.cygnus.com>

	* rdi-share/unixcomm.c: Fix SERIAL_PREFIX so it matches the prefix
	used by each operating system.

2000-01-06  Elena Zannoni  <ezannoni@kwikemart.cygnus.com>

	* breakpoint.c (until_break_command): Add an argument for the
 	continuation, the beginning of the cleanups set up by this
 	command.
	(until_break_command_continuation): Do cleanups until the one
 	passed in as argument instead of doing all of them.

	* infcmd.c (finish_command_continuation): Expect a new argument,
 	which indicates up to where to do cleanups. Update calls to
 	do_exec_cleanups to use this marker, instead of ALL_CLEANUPS.
	(finish_command): Add another argument for the continuation: the
	starting cleanup for this command.

2000-01-05  Fernando Nasser  <fnasser@totem.to.cygnus.com>

	From Grant Edwards <grante@visi.com> (original patch from Thomas
	Zenker ):
	* rdi-share/ardi.c: Allow interruption of interruptible
	targets with a <CNTL-C>.

2000-01-04  Fernando Nasser  <fnasser@totem.to.cygnus.com>

	* rdi-share/etherdrv.c (fetch_ports): Send extra words on request
	to control port to accommodate some versions of Angel.

2000-01-04  Fernando Nasser  <fnasser@totem.to.cygnus.com>

	* rdi-share/devsw.c (dumpPacket): Fix source of channel information.
	Add interpretation for C Support Library packets.

2000-01-04  Fernando Nasser  <fnasser@totem.to.cygnus.com>

	* rdi-share/devsw.c (DevSW_Close): Remove const from argument that
	is now being modified.
	* rdi-share/devsw.h: Adjust declaration of the above funtion.

For older changes see ChangeLog-99

Local Variables:
mode: change-log
left-margin: 8
fill-column: 74
version-control: never
End:
